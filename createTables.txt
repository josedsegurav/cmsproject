CREATE TABLE roles (
    role_id INT AUTO_INCREMENT PRIMARY KEY,
    role_name VARCHAR(50) NOT NULL
);

CREATE TABLE users (
	user_id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    password VARCHAR(255) NOT NULL,
    role_id INT NOT NULL,
    FOREIGN KEY (role_id) REFERENCES roles(role_id)
 	   
);

CREATE TABLE permissions (
    permission_id INT AUTO_INCREMENT PRIMARY KEY,
    permission_name VARCHAR(50) NOT NULL
);

CREATE TABLE role_permissions (
    role_id INT NOT NULL,
    permission_id INT NOT NULL,
    PRIMARY KEY (role_id, permission_id),
    FOREIGN KEY (role_id) REFERENCES roles(role_id),
    FOREIGN KEY (permission_id) REFERENCES permissions(permission_id)
);

CREATE TABLE portfolios (
    portfolio_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    about_info VARCHAR(300),
    phone VARCHAR(300),
    email VARCHAR(50) NOT NULL,
    website VARCHAR(50) NOT NULL
);

CREATE TABLE projects (
    project_id INT AUTO_INCREMENT PRIMARY KEY,
    project_name VARCHAR(50) NOT NULL,
    project_description VARCHAR(300) NOT NULL,
    portfolio_id INT NOT NULL,
    FOREIGN KEY portfolio_id REFERENCES portfolios(portfolio_id)
);

CREATE TABLE favorites (
    user_id INT NOT NULL,
    project_id INT NOT NULL,
    date_created TIMESTAMP,
    PRIMARY KEY(user_id, project_id),
    FOREIGN KEY user_id REFERENCES users(user_id),
    FOREIGN KEY project_id REFERENCES projects(project_id)
);

CREATE TABLE images (
    image_id INT PRIMARY KEY,
    image_title VARCHAR(50) NOT NULL,
    image_url VARCHAR(300) NOT NULL,
    project_id INT NOT NULL,
    FOREIGN KEY project_id REFERENCES projects(project_id)
);

CREATE TABLE comments (
    user_id INT NOT NULL,
    project_id INT NULL,
    comment_content VARCHAR(300),
    PRIMARY KEY(user_id, project_id),
    FOREIGN KEY user_id REFERENCES users(user_id),
    FOREIGN KEY project_id REFERENCES projects(project_id)
);
    
    